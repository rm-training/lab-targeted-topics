<!doctype html>
<html class="no-js" lang="">

<head>
  <title>Targeted Topics - Web Components</title>
  <meta charset="utf8" />
  <link href="/vendor/semantic-ui/semantic.min.css" rel="stylesheet" type="text/css" />
</head>

<body class="ui container">
  <h1>Exercise 1</h1>

  <p>Create a "joke-machine" Web Component</p>

  <p>Our joke-machine element will render out a random joke from an internal list of 3-5 jokes</p>

  <p>Need joke ideas? See https://icanhazdadjoke.com/</p>

  <ol>
    <li>The element will randomly display a joke (in a &lt;p&gt; tag) from the array</li>
    <li>Use a shadow dom to encapsulate your content</li>
    <li>Don't forget to register your custom element</li>
    <li>Bonus: Add a button next to the joke which changes the joke when a user clicks it (el.addEventListener)</li>
  </ol>

  <div class="ui segment">

    <joke-machine></joke-machine>

    <script>

      /**
       * Returns a random integer from 0 up to but not including the max
       */
      function getRandomInt(max) {
        return Math.floor(Math.random() * Math.floor(max));
      }

      // @todo - I shouldn't pollute the global scope
      const jokes = [
        'You know what they say about cliffhangers...',
        'Why did the coffee file a police report? It got mugged.',
        'I saw a documentary on TV last night about how they put ships together. It was rivetting.'
      ];

      class JokeMachine extends HTMLElement {
        static jokes = [
            'You know what they say about cliffhangers...',
            'Why did the coffee file a police report? It got mugged.',
            'I saw a documentary on TV last night about how they put ships together. It was rivetting.'
        ]

        constructor() {
          super();

          this.attachShadow({mode: 'open'});

          const p = document.createElement('p');

          p.innerHTML = this.constructor.jokes[getRandomInt(3)];

          this.shadowRoot.appendChild(p);
        }
      }

      // @todo - register the custom element
      customElements.define('joke-machine', JokeMachine);
    </script>

  </div>

</body>

</html>